<dialog class="dialog-backdrop" id="updateTaskDialog">
    <div class="dialog-container">
        <div class="dialog-content">
            <div class="dialog-header">
                <h2 class="dialog-title">更新任務進度</h2>
                <button type="button" class="close-btn" id="closeUpdateTaskBtn">&times;</button>
            </div>
            
            <form id="updateTaskForm" action="#" method="post">
                {% csrf_token %}
                <input type="hidden" id="taskIdInput" name="task_id">
                
                <!-- Progress Bar Section -->
                <div class="progress-section">
                    <div class="progress-label">目前進度</div>
                    <div class="progress-value" id="currentProgress">0%</div>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="progressBar" style="width: 0%">
                        </div>
                    </div>
                </div>
                
                <!-- Progress History Table -->
                <div class="progress-history">
                    <table class="progress-table">
                        <thead>
                            <tr class="progress-table-header">
                                <th>填寫者</th>
                                <th>時間</th>
                                <th>事項</th>
                                <th>進度</th>
                            </tr>
                        </thead>
                        <tbody id="historyTableBody">
                            <!-- Task history will be loaded here -->
                            <tr class="progress-table-row loading-message">
                                <td colspan="4">載入中...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Add New Progress Entry -->
                <div class="add-progress-entry">
                    <div class="input-group">
                        <input type="text" class="form-control" id="infoInput" name="info" placeholder="請填寫事項" required>
                        <div class="input-addon">
                            <input type="number" class="progress-input" id="progressInput" name="progress" 
                                   placeholder="0" min="0" max="100" required>
                        </div>
                    </div>
                </div>
                  <div id="updateTaskFormErrors" class="form-errors"></div>
                
                <div class="dialog-actions">
                    <button type="button" id="cancelUpdateTaskBtn" class="cancel-btn">取消</button>
                    <button type="submit" id="submitUpdateTaskBtn" class="save-btn">更新</button>
                </div>
            </form>
        </div>
    </div>
</dialog>